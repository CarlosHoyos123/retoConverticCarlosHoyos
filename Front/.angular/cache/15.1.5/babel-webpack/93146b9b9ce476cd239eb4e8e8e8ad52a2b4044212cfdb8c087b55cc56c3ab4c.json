{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/servicios/product.service\";\nimport * as i3 from \"src/app/servicios/auth.service\";\nimport * as i4 from \"src/app/servicios/car.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"./buttons/select-button/select-button.component\";\nfunction ProductDescriptionComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 3);\n    i0.ɵɵelement(2, \"span\", 4);\n    i0.ɵɵtext(3, \" Loading... \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵelement(1, \"app-select-button\", 24);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const size_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"option\", size_r9);\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function ProductDescriptionComponent_ng_container_1_div_24_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const color_r10 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.toggleColor(color_r10.id));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const color_r10 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(color_r10.color);\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_ng_template_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r6.quantityLimit, \" disponibles)\");\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_ng_template_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r8.noItemsMesage, \")\");\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"button\", 5);\n    i0.ɵɵelementStart(2, \"div\", 6)(3, \"div\", 7)(4, \"div\", 8);\n    i0.ɵɵelement(5, \"img\", 9)(6, \"hr\");\n    i0.ɵɵelementStart(7, \"h3\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 8)(12, \"p\", 10);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\", 11);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"p\", 12);\n    i0.ɵɵtext(17, \"Seleccione talla para ver disponibilidad de colores\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"p\", 13);\n    i0.ɵɵtext(19, \" Seleccione talla. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 6);\n    i0.ɵɵtemplate(21, ProductDescriptionComponent_ng_container_1_div_21_Template, 2, 1, \"div\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"p\", 13);\n    i0.ɵɵtext(23, \"Seleccione Color.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(24, ProductDescriptionComponent_ng_container_1_div_24_Template, 3, 1, \"div\", 14);\n    i0.ɵɵelementStart(25, \"div\")(26, \"span\", 15);\n    i0.ɵɵtext(27, \"cantidad: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"input\", 16);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDescriptionComponent_ng_container_1_Template_input_ngModelChange_28_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.quantitySelected = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(29, ProductDescriptionComponent_ng_container_1_div_29_Template, 1, 0, \"div\", 17);\n    i0.ɵɵtemplate(30, ProductDescriptionComponent_ng_container_1_ng_template_30_Template, 2, 1, \"ng-template\", null, 18, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtemplate(32, ProductDescriptionComponent_ng_container_1_ng_template_32_Template, 2, 1, \"ng-template\", null, 19, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"div\", 7)(35, \"div\", 20)(36, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function ProductDescriptionComponent_ng_container_1_Template_button_click_36_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.itemToCart());\n    });\n    i0.ɵɵtext(37, \"Agregar al carrito\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(38, \"div\", 20)(39, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function ProductDescriptionComponent_ng_container_1_Template_button_click_39_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.goToCart());\n    });\n    i0.ɵɵtext(40, \"Ver Mi carrito\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelement(41, \"hr\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const _r5 = i0.ɵɵreference(31);\n    const _r7 = i0.ɵɵreference(33);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r1.description.rutaFoto, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.description.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.description.descripcion);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.description.nombre, \": \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" $ \", ctx_r1.description.precio, \" COP \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.sizes);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.colors);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.quantitySelected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.quantityLimit != 0)(\"ngIfThen\", _r5)(\"ngIfElse\", _r7);\n  }\n}\nexport class ProductDescriptionComponent {\n  constructor(route, _service, _Auth, _carService, router) {\n    this.route = route;\n    this._service = _service;\n    this._Auth = _Auth;\n    this._carService = _carService;\n    this.router = router;\n    this.load = false;\n    this.productId = 0;\n    this.productImage = \"../../../../assets/images/No_disponible.jpg\";\n    this.noItemsMesage = \"No disponible\";\n    //-------------\n    this.selectedColor = 0;\n    this.selectedSize = 0;\n    this.quantitySelected = 0;\n    this.quantityLimit = 0;\n    // ----------------\n    this.colors = [];\n    this.sizes = [];\n    this.stocks = [];\n    //------------------\n    this.toCarData = {\n      cliente: 0,\n      desde: '',\n      producto: 0,\n      talla: 0,\n      color: 0,\n      cantidad: 0\n    };\n    this.description = {\n      plu: '',\n      nombre: '',\n      fabricante: '',\n      precio: 0,\n      descripcion: '',\n      rutaFoto: \"../../../../assets/images/No_disponible.jpg\"\n    };\n  }\n  ngOnInit() {\n    this.productId = this.route.snapshot.params['id'];\n    this.productDetail();\n  }\n  toggleColor(color) {\n    this.selectedColor = color;\n    this.quantityShown();\n  }\n  toggleSize(size) {\n    this.selectedSize = size;\n    this.quantityShown();\n  }\n  quantityShown() {\n    this.quantityLimit = 0;\n    this.stocks.forEach(stock => {\n      if (stock.color == this.selectedColor && stock.talla == this.selectedSize) {\n        this.quantityLimit = stock.cantidad;\n      }\n    });\n  }\n  productDetail() {\n    this._service.ProductDetail(this.productId).subscribe(response => {\n      this.colors = response.colorsAvailable;\n      this.sizes = response.sizesAvailable;\n      this.description = response.productInfo;\n      this.stocks = response.quantityAvailable;\n      this.load = true;\n    }).add();\n  }\n  itemToCart() {\n    let session = this._Auth.session;\n    this.toCarData.cliente = session.client.cliente;\n    this.toCarData.color = this.selectedColor;\n    this.toCarData.talla = this.selectedSize;\n    this.toCarData.cantidad = this.quantitySelected;\n    this.toCarData.producto = this.productId;\n    this._carService.addToCar(this.toCarData).subscribe(response => {\n      alert(\"hemos agregado el producto\" + response.producto + \" en: \" + response.cantidad + \".\");\n    }).add();\n  }\n  goToCart() {\n    this.router.navigate(['Tienda/carrito']);\n  }\n}\nProductDescriptionComponent.ɵfac = function ProductDescriptionComponent_Factory(t) {\n  return new (t || ProductDescriptionComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.productServicio), i0.ɵɵdirectiveInject(i3.AuthServicio), i0.ɵɵdirectiveInject(i4.carServicio), i0.ɵɵdirectiveInject(i1.Router));\n};\nProductDescriptionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductDescriptionComponent,\n  selectors: [[\"app-product-description\"]],\n  decls: 2,\n  vars: 2,\n  consts: [[\"class\", \"overlay\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"overlay\"], [\"type\", \"button\", \"disabled\", \"\", 1, \"btn\", \"btn-primary\"], [\"role\", \"status\", \"aria-hidden\", \"true\", 1, \"spinner-grow\", \"spinner-grow-sm\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", \"position-absolute\", \"top-0\", \"end-0\"], [1, \"container\", \"text-center\"], [1, \"row\"], [1, \"col-6\"], [\"alt\", \"...\", 1, \"img-thumbnail\", 3, \"src\"], [1, \"fs-1\", \"fw-bold\"], [1, \"fs-1\"], [1, \"fst-italic\", \"fs-5\"], [1, \"fs-2\"], [\"class\", \"row row-cols-auto\", 4, \"ngFor\", \"ngForOf\"], [1, \"cantidad\"], [\"type\", \"number\", \"id\", \"quantityInput\", 1, \"form-control-md\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\", \"ngIfThen\", \"ngIfElse\"], [\"thenBlock\", \"\"], [\"elseBlock\", \"\"], [1, \"col\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"click\"], [\"size\", \"8px\"], [1, \"row\", \"row-cols-auto\"], [3, \"option\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 2, \"background-color\", \"blue\", 3, \"click\"], [1, \"QuantityInStock\"]],\n  template: function ProductDescriptionComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductDescriptionComponent_div_0_Template, 4, 0, \"div\", 0);\n      i0.ɵɵtemplate(1, ProductDescriptionComponent_ng_container_1_Template, 42, 11, \"ng-container\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", !ctx.load);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.load);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.DefaultValueAccessor, i6.NumberValueAccessor, i6.NgControlStatus, i6.NgModel, i7.SelectButtonComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ProductDescriptionComponent","constructor","route","_service","_Auth","_carService","router","cliente","desde","producto","talla","color","cantidad","plu","nombre","fabricante","precio","descripcion","rutaFoto","ngOnInit","productId","snapshot","params","productDetail","toggleColor","selectedColor","quantityShown","toggleSize","size","selectedSize","quantityLimit","stocks","forEach","stock","ProductDetail","subscribe","response","colors","colorsAvailable","sizes","sizesAvailable","description","productInfo","quantityAvailable","load","add","itemToCart","session","toCarData","client","quantitySelected","addToCar","alert","goToCart","navigate","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\chrod\\OneDrive\\Documentos\\RepositoriosConvertic\\Angular\\FrontEcommerce\\src\\app\\modulos\\detailed\\product-description\\product-description.component.html","C:\\Users\\chrod\\OneDrive\\Documentos\\RepositoriosConvertic\\Angular\\FrontEcommerce\\src\\app\\modulos\\detailed\\product-description\\product-description.component.ts"],"sourcesContent":["<div class=\"overlay\" *ngIf=\"!load\">  \n  <button class=\"btn btn-primary\" type=\"button\" disabled>\n    <span class=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span>\n    Loading...\n  </button>\n</div>\n<ng-container *ngIf=\"load\">\n  <button type=\"button\" class=\"btn-close position-absolute top-0 end-0\" aria-label=\"Close\"></button>\n  <div class=\"container text-center\">\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <img src= {{description.rutaFoto}} class=\"img-thumbnail\" alt=\"...\">\n          <hr>\n          <h3>{{description.nombre}}</h3>\n          <p>{{description.descripcion}}</p>\n        </div>\n        <div class=\"col-6\">\n          <p class=\"fs-1 fw-bold\">{{description.nombre}}: </p>\n          <p class=\"fs-1\"> $ {{description.precio}} COP </p>\n          <p class=\"fst-italic fs-5\">Seleccione talla para ver disponibilidad de colores</p>\n          <p class=\"fs-2\"> Seleccione talla. </p>\n          <div class=\"container text-center\">\n            <div class=\"row row-cols-auto\" *ngFor=\"let size of sizes\">\n              <app-select-button [option]=\"size\"></app-select-button>\n            </div>\n          </div>\n          <p class=\"fs-2\">Seleccione Color.</p>\n            <div class=\"row row-cols-auto\" *ngFor=\"let color of colors\">\n                <button type=\"button\" class=\"btn btn-secondary\" (click)=\"toggleColor(color.id)\" style=\"background-color: blue\" >{{color.color}}</button>\n            </div>\n          <div>\n              <span class=\"cantidad\">cantidad: </span> \n              <input type=\"number\" [(ngModel)]=\"quantitySelected\" class=\"form-control-md\" id=\"quantityInput\">\n              <div *ngIf=\"quantityLimit != 0; then thenBlock else elseBlock\"></div>\n                <ng-template #thenBlock>\n                  <span class=\"QuantityInStock\"> ({{quantityLimit}} disponibles)</span>\n                </ng-template>\n                <ng-template #elseBlock>\n                  <span class=\"QuantityInStock\"> ({{noItemsMesage}})</span>\n                </ng-template>\n\n          </div>\n          <div class=\"row\">\n              <div class=\"col\">\n                <button type=\"button\" class=\"btn btn-primary btn-lg\" (click)=\"itemToCart()\">Agregar al carrito</button>\n              </div>\n              <div class=\"col\">\n                <button type=\"button\" class=\"btn btn-primary btn-lg\" (click)=\"goToCart()\">Ver Mi carrito</button>\n              </div>\n            </div>\n        </div>\n      </div>\n      <hr size=\"8px\"/>\n  </div>\n</ng-container>\n","import { Component, OnInit} from '@angular/core';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport { productServicio } from 'src/app/servicios/product.service';\r\nimport { DetailResponse } from 'src/app/interface/detailResponse';\r\nimport { colorsAvailable } from 'src/app/interface/color';\r\nimport { Size } from 'src/app/interface/size';\r\nimport { productInfo } from 'src/app/interface/productDetailed';\r\nimport { ProductStock } from 'src/app/interface/productStock';\r\nimport { ItemToCar } from 'src/app/interface/itemToCar';\r\nimport { AuthServicio } from 'src/app/servicios/auth.service';\r\nimport { carServicio } from 'src/app/servicios/car.service';\r\n\r\n@Component({\r\n  selector: 'app-product-description',\r\n  templateUrl: './product-description.component.html',\r\n  styleUrls: ['./product-description.component.css']\r\n})\r\nexport class ProductDescriptionComponent {\r\n\r\n  load: boolean = false\r\n  productId:number = 0\r\n  productImage = \"../../../../assets/images/No_disponible.jpg\";\r\n  noItemsMesage: string = \"No disponible\"; \r\n  //-------------\r\n  selectedColor:number = 0;\r\n  selectedSize:number = 0;\r\n  quantitySelected:number = 0;\r\n  quantityLimit:number = 0;\r\n  // ----------------\r\n  colors: colorsAvailable[] =[];\r\n  sizes: Size[] =[];\r\n  stocks: ProductStock[] =[];\r\n  //------------------\r\n  toCarData: ItemToCar ={\r\n    cliente: 0,\r\n    desde: '',\r\n    producto: 0,\r\n    talla: 0,\r\n    color: 0,\r\n    cantidad: 0\r\n  }\r\n  description: productInfo = {\r\n      plu: '',\r\n      nombre: '',\r\n      fabricante: '',\r\n      precio: 0,\r\n      descripcion: '',\r\n      rutaFoto: \"../../../../assets/images/No_disponible.jpg\"\r\n  }\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private _service: productServicio,\r\n    private _Auth: AuthServicio,\r\n    private _carService: carServicio,\r\n    private router: Router\r\n  ) {  }\r\n\r\nngOnInit(){\r\n  this.productId = this.route.snapshot.params['id'];\r\n  this.productDetail();\r\n}\r\n\r\ntoggleColor(color:number){\r\n  this.selectedColor = color;\r\n  this.quantityShown();\r\n}\r\n\r\ntoggleSize(size: number){\r\n  this.selectedSize = size;\r\n  this.quantityShown();\r\n}\r\n\r\nquantityShown(){\r\n  this.quantityLimit = 0;\r\n  this.stocks.forEach((stock) =>{\r\n    if(stock.color == this.selectedColor && stock.talla == this.selectedSize){\r\n      this.quantityLimit = stock.cantidad;\r\n    }\r\n  });\r\n}\r\n\r\nproductDetail(){\r\nthis._service.ProductDetail(this.productId).\r\n  subscribe((response: DetailResponse)=>{\r\n    this.colors = response.colorsAvailable;\r\n    this.sizes = response.sizesAvailable;\r\n    this.description = response.productInfo;\r\n    this.stocks = response.quantityAvailable;\r\n    this.load = true;\r\n  }).add()\r\n}\r\n\r\nitemToCart(){\r\n  let session = this._Auth.session;\r\n  this.toCarData.cliente = session.client.cliente;\r\n  this.toCarData.color = this.selectedColor;\r\n  this.toCarData.talla = this.selectedSize;\r\n  this.toCarData.cantidad = this.quantitySelected\r\n  this.toCarData.producto = this.productId;\r\n  this._carService.addToCar(this.toCarData).\r\n    subscribe((response: ItemToCar)=>{\r\n      alert(\"hemos agregado el producto\"+response.producto+\" en: \"+response.cantidad+\".\")\r\n    }).add()\r\n}\r\n\r\ngoToCart(){\r\n  this.router.navigate(['Tienda/carrito']);\r\n}\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}