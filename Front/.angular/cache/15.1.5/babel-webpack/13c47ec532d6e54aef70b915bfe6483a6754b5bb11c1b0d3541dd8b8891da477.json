{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/servicios/product.service\";\nimport * as i3 from \"src/app/servicios/auth.service\";\nimport * as i4 from \"src/app/servicios/car.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"./buttons/select-button/select-button.component\";\nfunction ProductDescriptionComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 3);\n    i0.ɵɵelement(2, \"span\", 4);\n    i0.ɵɵtext(3, \" Loading... \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_option_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const size_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", size_r9);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(size_r9.talla);\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-select-button\", 32);\n    i0.ɵɵlistener(\"colorSelection\", function ProductDescriptionComponent_ng_container_1_div_31_Template_app_select_button_colorSelection_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.toggleColor($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const color_r10 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"color\", color_r10);\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_ng_template_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 33);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r6.quantityLimit, \" disponibles)\");\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_ng_template_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 33);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r8.noItemsMesage, \")\");\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"button\", 5);\n    i0.ɵɵelementStart(2, \"div\", 6)(3, \"div\", 7)(4, \"div\", 8);\n    i0.ɵɵelement(5, \"img\", 9)(6, \"hr\");\n    i0.ɵɵelementStart(7, \"h3\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 8)(12, \"p\", 10);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\", 11);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"p\", 12);\n    i0.ɵɵtext(17, \"Seleccione talla para ver disponibilidad de colores\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"p\", 13);\n    i0.ɵɵtext(19, \" Seleccione talla. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 6)(21, \"div\", 14)(22, \"div\", 6)(23, \"div\", 15)(24, \"select\", 16);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDescriptionComponent_ng_container_1_Template_select_ngModelChange_24_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.toggleSize($event));\n    });\n    i0.ɵɵtemplate(25, ProductDescriptionComponent_ng_container_1_option_25_Template, 2, 2, \"option\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"label\", 18);\n    i0.ɵɵtext(27, \"Seleccione talla\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(28, \"p\", 19);\n    i0.ɵɵtext(29, \"Seleccione Color.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"div\", 20);\n    i0.ɵɵtemplate(31, ProductDescriptionComponent_ng_container_1_div_31_Template, 2, 1, \"div\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"div\")(33, \"div\", 22)(34, \"span\", 23);\n    i0.ɵɵtext(35, \"cantidad: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"input\", 24);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDescriptionComponent_ng_container_1_Template_input_ngModelChange_36_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.quantitySelected = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(37, ProductDescriptionComponent_ng_container_1_div_37_Template, 1, 0, \"div\", 25);\n    i0.ɵɵtemplate(38, ProductDescriptionComponent_ng_container_1_ng_template_38_Template, 2, 1, \"ng-template\", null, 26, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtemplate(40, ProductDescriptionComponent_ng_container_1_ng_template_40_Template, 2, 1, \"ng-template\", null, 27, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(42, \"div\", 28)(43, \"div\", 29)(44, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function ProductDescriptionComponent_ng_container_1_Template_button_click_44_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.itemToCart());\n    });\n    i0.ɵɵtext(45, \"Agregar al carrito\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(46, \"div\", 29)(47, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function ProductDescriptionComponent_ng_container_1_Template_button_click_47_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.goToCart());\n    });\n    i0.ɵɵtext(48, \"Ver Mi carrito\");\n    i0.ɵɵelementEnd()()()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const _r5 = i0.ɵɵreference(39);\n    const _r7 = i0.ɵɵreference(41);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r1.description.rutaFoto, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.description.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.description.descripcion);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.description.nombre, \": \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" $ \", ctx_r1.description.precio, \" COP \");\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.selectedSize);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.sizes);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.FilteredColorsBySize);\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate(\"max\", ctx_r1.quantityLimit);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.quantitySelected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.quantityLimit != 0)(\"ngIfThen\", _r5)(\"ngIfElse\", _r7);\n  }\n}\nexport class ProductDescriptionComponent {\n  constructor(route, _service, _Auth, _carService, router) {\n    this.route = route;\n    this._service = _service;\n    this._Auth = _Auth;\n    this._carService = _carService;\n    this.router = router;\n    this.load = false;\n    this.productId = 0;\n    this.productImage = \"../../../../assets/images/No_disponible.jpg\";\n    this.noItemsMesage = \"No disponible\";\n    //-------------\n    this.selectedColor = 0;\n    this.selectedSize = 0;\n    this.quantitySelected = 0;\n    this.quantityLimit = 0;\n    // ----------------\n    this.colors = [];\n    this.sizes = [];\n    this.stocks = [];\n    this.FilteredColorsBySize = [];\n    //------------------\n    this.toCarData = {\n      cliente: 0,\n      desde: '',\n      producto: 0,\n      talla: 0,\n      color: 0,\n      cantidad: 0\n    };\n    this.description = {\n      plu: '',\n      nombre: '',\n      fabricante: '',\n      precio: 0,\n      descripcion: '',\n      rutaFoto: \"../../../../assets/images/No_disponible.jpg\"\n    };\n  }\n  ngOnInit() {\n    this.productId = this.route.snapshot.params['id'];\n    this.productDetail();\n  }\n  toggleColor(color) {\n    this.selectedColor = color.id;\n    this.quantityShown();\n  }\n  toggleSize(size) {\n    this.selectedSize = size.id;\n    this.filterColorBySize(size);\n    this.quantityShown();\n  }\n  filterColorBySize(size) {\n    this.FilteredColorsBySize.length = 0;\n    this.stocks.forEach(oneStock => {\n      if (oneStock.talla == size.id) {\n        this.findColorEntityBiId(oneStock.color);\n      }\n    });\n  }\n  findColorEntityBiId(id) {\n    this.colors.forEach(oneColor => {\n      if (oneColor.id == id) {\n        this.FilteredColorsBySize.push(oneColor);\n      }\n    });\n  }\n  quantityShown() {\n    this.quantityLimit = 0;\n    this.stocks.forEach(stock => {\n      if (stock.color == this.selectedColor && stock.talla == this.selectedSize) {\n        this.quantityLimit = stock.cantidad;\n      }\n    });\n  }\n  productDetail() {\n    this._service.ProductDetail(this.productId).subscribe(response => {\n      this.colors = response.colorsAvailable;\n      this.sizes = response.sizesAvailable;\n      this.description = response.productInfo;\n      this.stocks = response.quantityAvailable;\n      this.load = true;\n    }).add();\n  }\n  itemToCart() {\n    if (this.selectedSize == 0 || this.selectedColor == 0) {\n      alert(\"Seleccione talla y color\");\n    } else {\n      let session = this._Auth.session;\n      this.toCarData.cliente = session.client.cliente;\n      this.toCarData.color = this.selectedColor;\n      this.toCarData.talla = this.selectedSize;\n      this.toCarData.cantidad = this.quantitySelected;\n      this.toCarData.producto = this.productId;\n      console.log(this.toCarData);\n      this._carService.addToCar(this.toCarData).subscribe(response => {\n        alert(\"Se ha agregado el producto al carrito\");\n      }).add();\n    }\n  }\n  goToCart() {\n    this.router.navigate(['Tienda/carrito']);\n  }\n}\nProductDescriptionComponent.ɵfac = function ProductDescriptionComponent_Factory(t) {\n  return new (t || ProductDescriptionComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.productServicio), i0.ɵɵdirectiveInject(i3.AuthServicio), i0.ɵɵdirectiveInject(i4.carServicio), i0.ɵɵdirectiveInject(i1.Router));\n};\nProductDescriptionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductDescriptionComponent,\n  selectors: [[\"app-product-description\"]],\n  decls: 2,\n  vars: 2,\n  consts: [[\"class\", \"overlay\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"overlay\"], [\"type\", \"button\", \"disabled\", \"\", 1, \"btn\", \"btn-primary\"], [\"role\", \"status\", \"aria-hidden\", \"true\", 1, \"spinner-grow\", \"spinner-grow-sm\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", \"position-absolute\", \"top-0\", \"end-0\"], [1, \"container\", \"text-center\"], [1, \"row\"], [1, \"col-6\"], [\"alt\", \"...\", 1, \"img-thumbnail\", 3, \"src\"], [1, \"fs-1\", \"fw-bold\"], [1, \"fs-1\"], [1, \"fst-italic\", \"fs-5\"], [1, \"fs-2\"], [1, \"row\", \"row-cols-1\", \"row-cols-md-2\"], [1, \"form-floating\"], [\"id\", \"floatingSelect\", \"aria-label\", \"Floating label select example\", \"name\", \"sizesOptions\", 1, \"form-select\", \"form-select-lg\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"floatingSelect\"], [1, \"fs-2\", \"m-2\"], [1, \"row\", \"row-cols-1\", \"row-cols-md-3\", \"m-3\"], [4, \"ngFor\", \"ngForOf\"], [1, \"container\", \"text-center\", \"m-3\"], [1, \"cantidad\"], [\"type\", \"number\", \"id\", \"quantityInput\", \"min\", \"1\", \"value\", \"2\", 1, \"form-control\", 3, \"ngModel\", \"max\", \"ngModelChange\"], [4, \"ngIf\", \"ngIfThen\", \"ngIfElse\"], [\"thenBlock\", \"\"], [\"elseBlock\", \"\"], [1, \"row\", \"m-3\"], [1, \"col\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"click\"], [3, \"ngValue\"], [3, \"color\", \"colorSelection\"], [1, \"QuantityInStock\"]],\n  template: function ProductDescriptionComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductDescriptionComponent_div_0_Template, 4, 0, \"div\", 0);\n      i0.ɵɵtemplate(1, ProductDescriptionComponent_ng_container_1_Template, 49, 13, \"ng-container\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", !ctx.load);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.load);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.NumberValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.MinValidator, i6.MaxValidator, i6.NgModel, i7.SelectButtonComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ProductDescriptionComponent","constructor","route","_service","_Auth","_carService","router","cliente","desde","producto","talla","color","cantidad","plu","nombre","fabricante","precio","descripcion","rutaFoto","ngOnInit","productId","snapshot","params","productDetail","toggleColor","selectedColor","id","quantityShown","toggleSize","size","selectedSize","filterColorBySize","FilteredColorsBySize","length","stocks","forEach","oneStock","findColorEntityBiId","colors","oneColor","push","quantityLimit","stock","ProductDetail","subscribe","response","colorsAvailable","sizes","sizesAvailable","description","productInfo","quantityAvailable","load","add","itemToCart","alert","session","toCarData","client","quantitySelected","console","log","addToCar","goToCart","navigate","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\chrod\\OneDrive\\Documentos\\RepositoriosConvertic\\Angular\\FrontEcommerce\\src\\app\\modulos\\detailed\\product-description\\product-description.component.html","C:\\Users\\chrod\\OneDrive\\Documentos\\RepositoriosConvertic\\Angular\\FrontEcommerce\\src\\app\\modulos\\detailed\\product-description\\product-description.component.ts"],"sourcesContent":["<div class=\"overlay\" *ngIf=\"!load\">  \n  <button class=\"btn btn-primary\" type=\"button\" disabled>\n    <span class=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span>\n    Loading...\n  </button>\n</div>\n<ng-container *ngIf=\"load\">\n  <button type=\"button\" class=\"btn-close position-absolute top-0 end-0\" aria-label=\"Close\"></button>\n  <div class=\"container text-center\">\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <img src= {{description.rutaFoto}} class=\"img-thumbnail\" alt=\"...\">\n          <hr>\n          <h3>{{description.nombre}}</h3>\n          <p>{{description.descripcion}}</p>\n        </div>\n        <div class=\"col-6\">\n          <p class=\"fs-1 fw-bold\">{{description.nombre}}: </p>\n          <p class=\"fs-1\"> $ {{description.precio}} COP </p>\n          <p class=\"fst-italic fs-5\">Seleccione talla para ver disponibilidad de colores</p>\n          <p class=\"fs-2\"> Seleccione talla. </p>\n          <div class=\"container text-center\">\n            <div class=\"row row-cols-1 row-cols-md-2\">\n              <div class=\"container text-center\">\n                <div class=\"form-floating\">\n                  <select class=\"form-select form-select-lg\" id=\"floatingSelect\" aria-label=\"Floating label select example\" name=\"sizesOptions\" [ngModel]=\"selectedSize\" (ngModelChange)=\"toggleSize($event)\">\n                    <option [ngValue]=\"size\" *ngFor=\"let size of sizes\">{{size.talla}}</option>\n                  </select>\n                  <label for=\"floatingSelect\">Seleccione talla</label>\n                </div>\n              </div>\n            </div>\n          </div>\n          <p class=\"fs-2 m-2\">Seleccione Color.</p>\n            <div class=\"row row-cols-1 row-cols-md-3 m-3\">\n              <div *ngFor=\"let color of FilteredColorsBySize\">\n                <app-select-button [color]=\"color\" (colorSelection)=\"toggleColor($event)\"></app-select-button>\n              </div>\n            </div>\n        <div>\n        <div class=\"container text-center m-3\">\n          <span class=\"cantidad\">cantidad: </span> \n          <input type=\"number\" [(ngModel)]=\"quantitySelected\" class=\"form-control\" id=\"quantityInput\"  min=\"1\" max=\"{{quantityLimit}}\" value=\"2\">\n          <div *ngIf=\"quantityLimit != 0; then thenBlock else elseBlock\"></div>\n            <ng-template #thenBlock>\n              <span class=\"QuantityInStock\"> ({{quantityLimit}} disponibles)</span>\n            </ng-template>\n            <ng-template #elseBlock>\n              <span class=\"QuantityInStock\"> ({{noItemsMesage}})</span>\n            </ng-template>\n          </div>\n        </div>\n          <div class=\"row m-3\">\n            <div class=\"col\">\n              <button type=\"button\" class=\"btn btn-primary btn-lg\" (click)=\"itemToCart()\">Agregar al carrito</button>\n            </div>\n            <div class=\"col\">\n              <button type=\"button\" class=\"btn btn-primary btn-lg\" (click)=\"goToCart()\">Ver Mi carrito</button>\n            </div>\n          </div>\n    </div>\n  </div>\n</div>\n</ng-container>\n","import { Component, OnInit} from '@angular/core';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport { productServicio } from 'src/app/servicios/product.service';\r\nimport { DetailResponse } from 'src/app/interface/detailResponse';\r\nimport { colorsAvailable } from 'src/app/interface/color';\r\nimport { Size } from 'src/app/interface/size';\r\nimport { productInfo } from 'src/app/interface/productDetailed';\r\nimport { ProductStock } from 'src/app/interface/productStock';\r\nimport { ItemToCar } from 'src/app/interface/itemToCar';\r\nimport { AuthServicio } from 'src/app/servicios/auth.service';\r\nimport { carServicio } from 'src/app/servicios/car.service';\r\n\r\n@Component({\r\n  selector: 'app-product-description',\r\n  templateUrl: './product-description.component.html',\r\n  styleUrls: ['./product-description.component.css']\r\n})\r\nexport class ProductDescriptionComponent implements OnInit{\r\n\r\n  load: boolean = false\r\n  productId:number = 0\r\n  productImage = \"../../../../assets/images/No_disponible.jpg\";\r\n  noItemsMesage: string = \"No disponible\"; \r\n  //-------------\r\n  selectedColor:number = 0;\r\n  selectedSize:number = 0;\r\n  quantitySelected:number = 0;\r\n  quantityLimit:number = 0;\r\n  // ----------------\r\n  colors: colorsAvailable[] =[];\r\n  sizes: Size[] =[];\r\n  stocks: ProductStock[] = [];\r\n  FilteredColorsBySize: colorsAvailable[] = [];\r\n  //------------------\r\n  toCarData: ItemToCar ={\r\n    cliente: 0,\r\n    desde: '',\r\n    producto: 0,\r\n    talla: 0,\r\n    color: 0,\r\n    cantidad: 0\r\n  }\r\n  description: productInfo = {\r\n      plu: '',\r\n      nombre: '',\r\n      fabricante: '',\r\n      precio: 0,\r\n      descripcion: '',\r\n      rutaFoto: \"../../../../assets/images/No_disponible.jpg\"\r\n  }\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private _service: productServicio,\r\n    private _Auth: AuthServicio,\r\n    private _carService: carServicio,\r\n    private router: Router\r\n  ) {  }\r\n\r\nngOnInit(){\r\n  this.productId = this.route.snapshot.params['id'];\r\n  this.productDetail();\r\n}\r\n\r\ntoggleColor(color:colorsAvailable){\r\n  this.selectedColor = color.id;\r\n  this.quantityShown();\r\n}\r\n\r\ntoggleSize(size: Size){\r\n  this.selectedSize = size.id;\r\n  this.filterColorBySize(size);\r\n  this.quantityShown();\r\n}\r\n\r\nfilterColorBySize(size:Size){\r\n  this.FilteredColorsBySize.length = 0;\r\n  this.stocks.forEach(oneStock => {\r\n    if(oneStock.talla == size.id){\r\n      this.findColorEntityBiId(oneStock.color);\r\n    }\r\n  });\r\n}\r\n\r\nfindColorEntityBiId(id: number){\r\n  this.colors.forEach(oneColor => {\r\n    if(oneColor.id == id){\r\n      this.FilteredColorsBySize.push(oneColor);\r\n    }\r\n  });\r\n}\r\n\r\nquantityShown(){\r\n  this.quantityLimit = 0;\r\n  this.stocks.forEach((stock) =>{\r\n    if(stock.color == this.selectedColor && stock.talla == this.selectedSize){\r\n      this.quantityLimit = stock.cantidad;\r\n    }\r\n  });\r\n}\r\n\r\nproductDetail(){\r\nthis._service.ProductDetail(this.productId).\r\n  subscribe((response: DetailResponse)=>{\r\n    this.colors = response.colorsAvailable;\r\n    this.sizes = response.sizesAvailable;\r\n    this.description = response.productInfo;\r\n    this.stocks = response.quantityAvailable;\r\n    this.load = true;\r\n  }).add()\r\n}\r\n\r\nitemToCart(){\r\n  if(this.selectedSize == 0 || this.selectedColor == 0){\r\n    alert(\"Seleccione talla y color\");\r\n    }else{\r\n    let session = this._Auth.session;\r\n    this.toCarData.cliente = session.client.cliente;\r\n    this.toCarData.color = this.selectedColor;\r\n    this.toCarData.talla = this.selectedSize;\r\n    this.toCarData.cantidad = this.quantitySelected\r\n    this.toCarData.producto = this.productId;\r\n    console.log(this.toCarData);\r\n    this._carService.addToCar(this.toCarData).\r\n      subscribe((response: ItemToCar)=>{\r\n        alert(\"Se ha agregado el producto al carrito\")\r\n      }).add()\r\n  }\r\n}\r\n\r\ngoToCart(){\r\n  this.router.navigate(['Tienda/carrito']);\r\n}\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}