{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/servicios/product.service\";\nimport * as i3 from \"src/app/servicios/auth.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction ProductDescriptionComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 3);\n    i0.ɵɵelement(2, \"span\", 4);\n    i0.ɵɵtext(3, \" Loading... \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function ProductDescriptionComponent_ng_container_1_div_21_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const size_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.toggleSize(size_r9.id));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const size_r9 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(size_r9.talla);\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function ProductDescriptionComponent_ng_container_1_div_24_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const color_r12 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.toggleColor(color_r12.id));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const color_r12 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(color_r12.color);\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_ng_template_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r6.quantityLimit, \" disponibles)\");\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_ng_template_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r8.noItemsMesage, \")\");\n  }\n}\nfunction ProductDescriptionComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"button\", 5);\n    i0.ɵɵelementStart(2, \"div\", 6)(3, \"div\", 7)(4, \"div\", 8);\n    i0.ɵɵelement(5, \"img\", 9)(6, \"hr\");\n    i0.ɵɵelementStart(7, \"h3\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 8)(12, \"p\", 10);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\", 11);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"p\", 12);\n    i0.ɵɵtext(17, \"Seleccione talla para ver disponibilidad de colores\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"p\", 13);\n    i0.ɵɵtext(19, \" Seleccione talla. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 6);\n    i0.ɵɵtemplate(21, ProductDescriptionComponent_ng_container_1_div_21_Template, 3, 1, \"div\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"p\", 13);\n    i0.ɵɵtext(23, \"Seleccione Color.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(24, ProductDescriptionComponent_ng_container_1_div_24_Template, 3, 1, \"div\", 14);\n    i0.ɵɵelementStart(25, \"div\")(26, \"span\", 15);\n    i0.ɵɵtext(27, \"cantidad: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"input\", 16);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDescriptionComponent_ng_container_1_Template_input_ngModelChange_28_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.quantitySelected = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(29, ProductDescriptionComponent_ng_container_1_div_29_Template, 1, 0, \"div\", 17);\n    i0.ɵɵtemplate(30, ProductDescriptionComponent_ng_container_1_ng_template_30_Template, 2, 1, \"ng-template\", null, 18, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtemplate(32, ProductDescriptionComponent_ng_container_1_ng_template_32_Template, 2, 1, \"ng-template\", null, 19, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"div\")(35, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function ProductDescriptionComponent_ng_container_1_Template_button_click_35_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.toCart());\n    });\n    i0.ɵɵtext(36, \"Agregar al carrito\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(37, \"hr\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const _r5 = i0.ɵɵreference(31);\n    const _r7 = i0.ɵɵreference(33);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r1.description.rutaFoto, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.description.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.description.descripcion);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.description.nombre, \": \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" $ \", ctx_r1.description.precio, \" COP \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.sizes);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.colors);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.quantitySelected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.quantityLimit != 0)(\"ngIfThen\", _r5)(\"ngIfElse\", _r7);\n  }\n}\nexport class ProductDescriptionComponent {\n  constructor(route, _service, _Auth) {\n    this.route = route;\n    this._service = _service;\n    this._Auth = _Auth;\n    this.load = false;\n    this.productId = 0;\n    this.productImage = \"../../../../assets/images/No_disponible.jpg\";\n    this.noItemsMesage = \"No disponible\";\n    //-------------\n    this.selectedColor = 0;\n    this.selectedSize = 0;\n    this.quantitySelected = 0;\n    this.quantityLimit = 0;\n    // ----------------\n    this.colors = [];\n    this.sizes = [];\n    this.stocks = [];\n    //------------------\n    this.toCarData = {\n      cliente: '',\n      desde: '',\n      producto: 0,\n      talla: 0,\n      color: 0,\n      cantidad: 0\n    };\n    this.description = {\n      plu: '',\n      nombre: '',\n      fabricante: '',\n      precio: 0,\n      descripcion: '',\n      rutaFoto: \"../../../../assets/images/No_disponible.jpg\"\n    };\n  }\n  ngOnInit() {\n    this.productId = this.route.snapshot.params['id'];\n    this.productDetail();\n  }\n  toggleColor(color) {\n    this.selectedColor = color;\n    this.quantityShown();\n  }\n  toggleSize(size) {\n    this.selectedSize = size;\n    this.quantityShown();\n  }\n  quantityShown() {\n    console.log(this.selectedSize + '-' + this.selectedColor);\n    this.stocks.forEach(stock => {\n      if (stock.color == this.selectedColor && stock.talla == this.selectedSize) {\n        console.log(\"CAMBIO\");\n        this.quantityLimit = stock.cantidad;\n      } else {\n        this.quantityLimit = 0;\n        console.log('EN ELSE');\n      }\n    });\n  }\n  productDetail() {\n    this._service.ProductDetail(this.productId).subscribe(response => {\n      this.colors = response.colorsAvailable;\n      this.sizes = response.sizesAvailable;\n      this.description = response.productInfo;\n      this.stocks = response.quantityAvailable;\n      this.load = true;\n    }).add();\n  }\n  toCart() {\n    let session = this._Auth.session;\n    this.toCarData.cliente = session.cliente.email;\n    this.toCarData.color = this.selectedColor;\n    this.toCarData.talla = this.selectedSize;\n    this.toCarData.cantidad = this.quantitySelected;\n    this.toCarData.producto = this.productId;\n    this._service.addToCar(this.toCarData).subscribe(response => {\n      alert(\"hemos agregado el producto\" + response.producto + \" en: \" + response.cantidad + \".\");\n    }).add();\n  }\n}\nProductDescriptionComponent.ɵfac = function ProductDescriptionComponent_Factory(t) {\n  return new (t || ProductDescriptionComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.productServicio), i0.ɵɵdirectiveInject(i3.AuthServicio));\n};\nProductDescriptionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductDescriptionComponent,\n  selectors: [[\"app-product-description\"]],\n  decls: 2,\n  vars: 2,\n  consts: [[\"class\", \"overlay\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"overlay\"], [\"type\", \"button\", \"disabled\", \"\", 1, \"btn\", \"btn-primary\"], [\"role\", \"status\", \"aria-hidden\", \"true\", 1, \"spinner-grow\", \"spinner-grow-sm\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", \"position-absolute\", \"top-0\", \"end-0\"], [1, \"container\", \"text-center\"], [1, \"row\"], [1, \"col-6\"], [\"alt\", \"...\", 1, \"img-thumbnail\", 3, \"src\"], [1, \"fs-1\", \"fw-bold\"], [1, \"fs-1\"], [1, \"fst-italic\", \"fs-5\"], [1, \"fs-2\"], [\"class\", \"row row-cols-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"cantidad\"], [\"type\", \"number\", \"id\", \"quantityInput\", 1, \"form-control-sm\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\", \"ngIfThen\", \"ngIfElse\"], [\"thenBlock\", \"\"], [\"elseBlock\", \"\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"click\"], [\"size\", \"8px\"], [1, \"row\", \"row-cols-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"btn-lg\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"btn-lg\", 2, \"background-color\", \"blue\", 3, \"click\"], [1, \"QuantityInStock\"]],\n  template: function ProductDescriptionComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductDescriptionComponent_div_0_Template, 4, 0, \"div\", 0);\n      i0.ɵɵtemplate(1, ProductDescriptionComponent_ng_container_1_Template, 38, 11, \"ng-container\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", !ctx.load);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.load);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.NgControlStatus, i5.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ProductDescriptionComponent","constructor","route","_service","_Auth","cliente","desde","producto","talla","color","cantidad","plu","nombre","fabricante","precio","descripcion","rutaFoto","ngOnInit","productId","snapshot","params","productDetail","toggleColor","selectedColor","quantityShown","toggleSize","size","selectedSize","console","log","stocks","forEach","stock","quantityLimit","ProductDetail","subscribe","response","colors","colorsAvailable","sizes","sizesAvailable","description","productInfo","quantityAvailable","load","add","toCart","session","toCarData","email","quantitySelected","addToCar","alert","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\chrod\\OneDrive\\Documentos\\RepositoriosConvertic\\reto\\Angular\\FrontEcommerce\\src\\app\\modulos\\detailed\\product-description\\product-description.component.html","C:\\Users\\chrod\\OneDrive\\Documentos\\RepositoriosConvertic\\reto\\Angular\\FrontEcommerce\\src\\app\\modulos\\detailed\\product-description\\product-description.component.ts"],"sourcesContent":["<div class=\"overlay\" *ngIf=\"!load\">  \n  <button class=\"btn btn-primary\" type=\"button\" disabled>\n    <span class=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span>\n    Loading...\n  </button>\n</div>\n<ng-container *ngIf=\"load\">\n  <button type=\"button\" class=\"btn-close position-absolute top-0 end-0\" aria-label=\"Close\"></button>\n  <div class=\"container text-center\">\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <img src= {{description.rutaFoto}} class=\"img-thumbnail\" alt=\"...\">\n          <hr>\n          <h3>{{description.nombre}}</h3>\n          <p>{{description.descripcion}}</p>\n        </div>\n        <div class=\"col-6\">\n          <p class=\"fs-1 fw-bold\">{{description.nombre}}: </p>\n          <p class=\"fs-1\"> $ {{description.precio}} COP </p>\n          <p class=\"fst-italic fs-5\">Seleccione talla para ver disponibilidad de colores</p>\n          <p class=\"fs-2\"> Seleccione talla. </p>\n          <div class=\"container text-center\">\n            <div class=\"row row-cols-2\" *ngFor=\"let size of sizes\">\n              <button type=\"button\" class=\"btn btn-secondary btn-lg\" (click)=\"toggleSize(size.id)\">{{size.talla}}</button>\n            </div>\n          </div>\n          <p class=\"fs-2\">Seleccione Color.</p>\n            <div class=\"row row-cols-2\" *ngFor=\"let color of colors\">\n              <button type=\"button\" class=\"btn btn-secondary btn-lg\" (click)=\"toggleColor(color.id)\" style=\"background-color: blue\" >{{color.color}}</button>\n            </div>\n          <div>\n              <span class=\"cantidad\">cantidad: </span> \n              <input type=\"number\" [(ngModel)]=\"quantitySelected\" class=\"form-control-sm\" id=\"quantityInput\">\n              <div *ngIf=\"quantityLimit != 0; then thenBlock else elseBlock\"></div>\n                <ng-template #thenBlock>\n                  <span class=\"QuantityInStock\"> ({{quantityLimit}} disponibles)</span>\n                </ng-template>\n                <ng-template #elseBlock>\n                  <span class=\"QuantityInStock\"> ({{noItemsMesage}})</span>\n                </ng-template>\n\n          </div>\n          <div>\n              <button type=\"button\" class=\"btn btn-primary btn-lg\" (click)=\"toCart()\">Agregar al carrito</button>\n          </div>\n        </div>\n      </div>\n      <hr size=\"8px\"/>\n  </div>\n</ng-container>\n","import { Component, OnInit} from '@angular/core';\nimport {ActivatedRoute} from '@angular/router';\nimport { productServicio } from 'src/app/servicios/product.service';\nimport { DetailResponse } from 'src/app/interface/detailResponse';\nimport { colorsAvailable } from 'src/app/interface/color';\nimport { Size } from 'src/app/interface/size';\nimport { productInfo } from 'src/app/interface/productDetailed';\nimport { ProductStock } from 'src/app/interface/productStock';\nimport { ItemToCar } from 'src/app/interface/itemToCar';\nimport { AuthServicio } from 'src/app/servicios/auth.service';\n\n@Component({\n  selector: 'app-product-description',\n  templateUrl: './product-description.component.html',\n  styleUrls: ['./product-description.component.css']\n})\nexport class ProductDescriptionComponent {\n\n  load: boolean = false\n  productId:number = 0\n  productImage = \"../../../../assets/images/No_disponible.jpg\";\n  noItemsMesage: string = \"No disponible\"; \n  //-------------\n  selectedColor:number = 0;\n  selectedSize:number = 0;\n  quantitySelected:number = 0;\n  quantityLimit:number = 0;\n  // ----------------\n  colors: colorsAvailable[] =[];\n  sizes: Size[] =[];\n  stocks: ProductStock[] =[];\n  //------------------\n  toCarData: ItemToCar ={\n    cliente: '',\n    desde: '',\n    producto: 0,\n    talla: 0,\n    color: 0,\n    cantidad: 0\n  }\n  description: productInfo = {\n      plu: '',\n      nombre: '',\n      fabricante: '',\n      precio: 0,\n      descripcion: '',\n      rutaFoto: \"../../../../assets/images/No_disponible.jpg\"\n  }\n\n  constructor(\n    private route: ActivatedRoute,\n    private _service: productServicio,\n    private _Auth: AuthServicio\n  ) {  }\n\nngOnInit(){\n  this.productId = this.route.snapshot.params['id'];\n  this.productDetail();\n}\n\ntoggleColor(color:number){\n  this.selectedColor = color;\n  this.quantityShown();\n}\n\ntoggleSize(size: number){\n  this.selectedSize = size;\n  this.quantityShown();\n}\n\nquantityShown(){\n  console.log(this.selectedSize + '-' + this.selectedColor) ;\n  this.stocks.forEach((stock) =>{\n    if(stock.color == this.selectedColor && stock.talla == this.selectedSize){\n      console.log(\"CAMBIO\");\n      this.quantityLimit = stock.cantidad;\n    }else{\n      this.quantityLimit =0;\n      console.log('EN ELSE');\n    }\n  });\n}\n\nproductDetail(){\nthis._service.ProductDetail(this.productId).\n  subscribe((response: DetailResponse)=>{\n    this.colors = response.colorsAvailable;\n    this.sizes = response.sizesAvailable;\n    this.description = response.productInfo;\n    this.stocks = response.quantityAvailable;\n    this.load = true;\n  }).add()\n}\n\ntoCart(){\n  let session = this._Auth.session;\n  this.toCarData.cliente = session.cliente.email;\n  this.toCarData.color = this.selectedColor;\n  this.toCarData.talla = this.selectedSize;\n  this.toCarData.cantidad = this.quantitySelected\n  this.toCarData.producto = this.productId;\n  this._service.addToCar(this.toCarData).\n    subscribe((response: ItemToCar)=>{\n      alert(\"hemos agregado el producto\"+response.producto+\" en: \"+response.cantidad+\".\")\n    }).add()\n}\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}